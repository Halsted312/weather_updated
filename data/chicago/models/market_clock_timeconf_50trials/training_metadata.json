{
  "trained_at": "2025-12-01T07:25:02.423959",
  "model_variant": "market_clock_tod_v1",
  "model_type": "global",
  "delta_range": [
    -13,
    8
  ],
  "delta_range_search": {
    "min_range": [
      -14,
      -8
    ],
    "max_range": [
      8,
      14
    ]
  },
  "delta_range_optimized": true,
  "n_thresholds": 21,
  "n_features": 113,
  "n_optuna_trials": 50,
  "n_train": 137256,
  "n_test": 13680,
  "n_train_days": 301,
  "n_test_days": 30,
  "cities": [
    "chicago"
  ],
  "metrics": {
    "accuracy": 0.06403508771929825,
    "mae": 4.368786549707602,
    "within_1": 0.1868421052631579,
    "within_2": 0.26747076023391814,
    "ordinal_loss": 81.73090227531613
  },
  "best_params": {
    "bootstrap_type": "Bernoulli",
    "depth": 4,
    "iterations": 889,
    "learning_rate": 0.04086598983758432,
    "border_count": 252,
    "l2_leaf_reg": 6.8293428327088765,
    "min_data_in_leaf": 46,
    "random_strength": 0.5146833230549877,
    "colsample_bylevel": 0.7419204122614811,
    "subsample": 0.8482518767986087
  },
  "feature_cols": [
    "minutes_since_market_open",
    "hours_since_market_open",
    "hours_to_event_close",
    "is_d_minus_1",
    "is_event_day",
    "vc_max_f_sofar",
    "vc_min_f_sofar",
    "vc_mean_f_sofar",
    "vc_std_f_sofar",
    "vc_q10_f_sofar",
    "vc_q25_f_sofar",
    "vc_q50_f_sofar",
    "vc_q75_f_sofar",
    "vc_q90_f_sofar",
    "vc_frac_part_sofar",
    "num_samples_sofar",
    "minutes_ge_base",
    "minutes_ge_base_m1",
    "max_run_ge_base",
    "max_run_ge_base_m1",
    "max_minus_second_max",
    "max_morning_f_sofar",
    "max_afternoon_f_sofar",
    "max_evening_f_sofar",
    "slope_max_30min_up_sofar",
    "slope_max_30min_down_sofar",
    "pred_max_round_sofar",
    "pred_max_of_rounded_sofar",
    "pred_ceil_max_sofar",
    "pred_floor_max_sofar",
    "pred_plateau_20min_sofar",
    "pred_ignore_singletons_sofar",
    "pred_c_first_sofar",
    "range_pred_rules_sofar",
    "num_distinct_preds_sofar",
    "snapshot_hour",
    "snapshot_hour_sin",
    "snapshot_hour_cos",
    "hour",
    "minute",
    "minutes_since_midnight",
    "hour_sin",
    "hour_cos",
    "minute_sin",
    "minute_cos",
    "time_of_day_sin",
    "time_of_day_cos",
    "doy_sin",
    "doy_cos",
    "week_sin",
    "week_cos",
    "month",
    "is_weekend",
    "edge_max_flag",
    "fcst_prev_max_f",
    "fcst_prev_min_f",
    "fcst_prev_mean_f",
    "fcst_prev_std_f",
    "fcst_prev_q10_f",
    "fcst_prev_q25_f",
    "fcst_prev_q50_f",
    "fcst_prev_q75_f",
    "fcst_prev_q90_f",
    "fcst_prev_frac_part",
    "fcst_prev_hour_of_max",
    "delta_vcmax_fcstmax_sofar",
    "fcst_remaining_potential",
    "temp_mean_last_30min",
    "temp_std_last_30min",
    "temp_max_last_30min",
    "temp_mean_last_60min",
    "temp_std_last_60min",
    "temp_max_last_60min",
    "temp_mean_last_120min",
    "temp_std_last_120min",
    "temp_rate_last_30min",
    "temp_rate_last_60min",
    "temp_acceleration",
    "temp_ema_30min",
    "temp_ema_60min",
    "minutes_since_max_observed",
    "temp_volatility_30min",
    "temp_volatility_60min",
    "intraday_range_sofar",
    "temp_cv_sofar",
    "obs_fcst_max_gap",
    "hours_until_fcst_max",
    "above_fcst_flag",
    "day_fraction",
    "temp_x_hours_remaining",
    "gap_x_hours_remaining",
    "temp_x_day_fraction",
    "fcst_obs_ratio",
    "fcst_obs_diff_squared",
    "log_minutes_since_open",
    "log_hours_to_close",
    "temp_zscore_vs_forecast",
    "is_heating_phase",
    "is_plateau_phase",
    "is_cooling_phase",
    "obs_confidence",
    "expected_delta_uncertainty",
    "confidence_weighted_gap",
    "fcst_importance_weight",
    "remaining_upside",
    "humidity_last_obs",
    "humidity_mean_last_60min",
    "humidity_std_last_60min",
    "high_humidity_flag",
    "windspeed_last_obs",
    "windspeed_max_last_60min",
    "windgust_max_last_60min",
    "strong_wind_flag"
  ]
}