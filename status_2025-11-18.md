# Status — 2025-11-18

## What’s Working
- `scripts/train_tmax_regressor.py` now trains the full GBDT + spline + GRU ensemble, exports per-minute predictions to `results/tmax_preds_<city>.csv`, and learns a dynamic `sigma_est` per snapshot.
- `backtest/run_backtest.py` supports `--model-type tmax_reg` plus probability/sigma/hybrid gates (`--tmax-min-prob`, `--tmax-sigma-multiplier`, `--hybrid-model-type`, `--hybrid-min-prob`). Chicago (2024-10-25→2025-11-16) drops from 639 trades (Sharpe −17.6) to 3 trades (Sharpe −1.4, max DD −6%) when using `0.60/0.75` gates (`results/backtest_chicago_tmax_gated_060_075.json`).
- `scripts/backtest_tmax_daily.py` produces once-per-day baseline JSON/CSVs so we can sanity-check the raw forecasts before minute-level execution (`results/tmax_daily_*`).
- `scripts/run_tmax_batch.py` loops through every `CITY_CONFIG` entry, runs the trainer/backtest/daily baseline, and is ready for nightly cron usage (`python scripts/run_tmax_batch.py --cities all ...`).
- Strike metadata no longer falls back to `NULL` — the discovery scripts, loader, and the new `scripts/fix_strike_metadata.py` all run the shared parser so Chicago backtests stop defaulting to 0.5 odds. Ops can also monitor live settlement inserts via `scripts/settlement_rollup.py` + `docs/ops/settlement_poller.md`.
- The Tmax trainer gained an optional CatBoost component + quantile outputs, and ModelKelly now supports time-of-day/sigma gating plus log-odds pooling against market prices (`--exec-*`, `--market-odds-weight`).

## Outstanding Questions / Bugs
- Hybrid gating (`--hybrid-model-type elasticnet --hybrid-min-prob 0.50`) currently blocks every Chicago trade (`results/backtest_chicago_tmax_hybrid.json`). The settlement walk-forward outputs appear misaligned with the 2024-10→2025-11 window.
- Austin EV work still has negative Sharpe because CatBoost/EV models are poorly calibrated (see top half of `project_status.md`).

## Next Actions (ordered)
1. Refresh settlement walk-forward models (ElasticNet + CatBoost) so hybrid gating has overlapping trades with the Tmax ensemble; rerun Chicago/Philadelphia/LA backtests with the combined filters.
2. Wire the new settlement roll-up + Exec overrides into the nightly monitoring report (cron logs, success/failure, latest Sharpe per city).
3. Resume Austin EV modeling: try shorter horizons, add NOAA/VC forecast features, and enforce dual EV+settlement gating before expanding to other brackets.

Reference docs:
- Detailed Tmax pipeline: `docs/TMAX_FORECAST_PIPELINE.md`
- Roadmap: `docs/NEXT_STEPS_2025-11-18.md`
- Historical status & experiment notes: `project_status.md`
